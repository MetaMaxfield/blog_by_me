![gif-logo](https://github.com/MetaMaxfield/blog_by_me/raw/master/Blog-by-Me.gif)

<h1>
    <img align="left" src='https://github.com/MetaMaxfield/blog_by_me/raw/master/static/img/site_logo.png?raw=true' width="53.5" height="48.72" alt="logo">
    Блог "MAXFIELD"
</h1>

![Static Badge](https://img.shields.io/badge/Python-3.11-blue?logo=python&labelColor=black)
![Static Badge](https://img.shields.io/badge/Django-4.2-lightgrey?logo=Django&labelColor=darkgreen)
![Static Badge](https://img.shields.io/badge/PostgreSQL-blue?logo=postgresql&logoColor=white)


Данный репозиторий - полноценный веб-проект, back-end которого самостоятельно написан мною с нуля.

## Содержание:

- [Инструменты](#необходимые-инструменты-для-работы-проекта)
- [Функционал](#реализованный-функционал)
- [Структура проекта](#структура-папок-и-файлов)
- [Установка](#установка)
- [Источники](#источники)

## Необходимые инструменты для работы проекта:

- [Python 3.11](https://www.python.org/downloads/release/python-3110/)
- [Django 4.2.1](https://pypi.org/project/Django/4.2.1/)
- [PostgreSQL](https://www.postgresql.org/download/)
- [SMTP-сервер Google](https://myaccount.google.com/apppasswords)
- [Google reCAPTCHA v3](https://www.google.com/recaptcha/admin/create?hl=ru)
- [Memcached 1.4.4](https://memcached.org/downloads)
- Файл .env с переменными окружения

## Реализованный функционал:

- Система постов с архитектурой блога;
- Постраничный вывод постов;
- Комментарии к постам и ответы к ним;
- Система рейтинга постов;
- Категории и теги к постам;
- Кастомизированная страница для ошибки 404;
- Шаблонные теги (Топ постов, Последние записи, Календарь, Популярные теги);
- Шаблонные фильры;
- Собственный видеохостинг проекта;
- Поиск по названию или содержанию;
- Система пользователей (Гость, Автор, Модератор, Администратор);
- Панель администратора с индивидуальными возможностями в зависимости от статуса персноала;
- Плоская страница "О проекте" с формой обратной связи к авторам;
- Навигационная цепочка сайта;
- Блок "Поделиться" для личных профилей авторов и записей блога;
- Мультиязычность (Русский, Английский);
- Защита от интернет-ботов (ReCAPTCHA v3);
- Оптимизированные запросы к базе данных;
- Кэширование.

## Структура папок и файлов:
```
├── blog                      # Пакет с приложением
│   ├── migrations            # Пакет с миграциями
│   ├── templatetags          # Пакет с шаблонными тегами приложения
│   └── __init__.py           # Файл инициализации и определения пакета
│   └── admin.py              # Файл с зарегистрированными моделями приложения в системе администрирования
│   └── apps.py               # Файл с конфигурацией приложения
│   └── forms.py              # Файл для хранения форм
│   └── models.py             # Файл с моделями данных приложения
│   └── tests.py              # Файл для создания тестов для приложения
│   └── translation.py        # Файл с обозначением полей моделей для локализации
│   └── urls.py               # Файл с шаблонами адресов проекта
│   └── views.py              # Файл с логикой приложения
├── blog_by_me                # Пакет с файлами проекта
│   └── __init__.py           # Файл инициализации и определения пакета
│   └── asgi.py               # Файл с конфигурацией для расширения возможностей WSGI
│   └── middleware.py         # Файл для плагинов глобального изменения входных и выходных данных
│   └── settings.py           # Файл с конфигурацией проекта
│   └── urls.py               # Файл с шаблонами адресов приложения 
│   └── views.py              # Файл с логикой отдельных функций в проекте
│   └── wsgi.py               # Файл с конфигурацией для запуска проекта как WSGI-приложения
├── common                    # Пакет с приложением, файлы которого используются в нескольких других приложениях
│   ├── management            # Родительский пакет для пакета с файлами пользовательских команд
│   │   ├──commands           # Пакет с файлами пользовательских команд
│   │   └── __init__.py       # Файл инициализации и определения пакета
│   ├── templatetags          # Пакет с шаблонными тегами приложения
│   └── __init__.py           # Файл инициализации и определения пакета
│   └── admin.py              # Файл с зарегистрированными моделями проекта в системе администрирования
├── flatpage_contact          # Пакет с приложением
│   ├── migrations            # Пакет с миграциями
│   ├── templatetags          # Пакет с шаблонными тегами приложения
│   └── __init__.py           # Файл инициализации и определения пакета
│   └── admin.py              # Файл с зарегистрированными моделями приложения в системе администрирования
│   └── apps.py               # Файл с конфигурацией приложения
│   └── forms.py              # Файл для хранения форм
│   └── models.py             # Файл с моделями данных приложения
│   └── tests.py              # Файл для создания тестов для приложения
│   └── translation.py        # Файл с обозначением полей моделей для локализации
│   └── urls.py               # Файл с шаблонами адресов приложения
│   └── views.py              # Файл с логикой приложения
├── locale                    # Папка с локализацией
├── media                     # Папка с изображениями и видеофайлами, которые добавляются при создании модели
├── services                  # Пакет с сервисным слоем приложений
│   ├── blog                  # Пакет с сервисным слоем приложения "blog"
│   │   └── __init__.py       # Файл инициализации и определения пакета
│   │   └── paginator.py      # Файл с модулем постраничного вывода
│   │   └── video_player.py   # Файл с модулем видеоплеера
│   ├── flatpage_contact      # Пакет с сервисным слоем приложения "flatpage_contact"
│   │   └── __init__.py       # Файл инициализации и определения пакета
│   │   └── send_mail.py      # Файл с модулем отправки сообщений через e-mail
│   ├── users                 # Пакет с сервисным слоем приложения "users"
│   │   └── __init__.py       # Файл инициализации и определения пакета
│   │   └── validator.py      # Файл с модулем валидатора поля модели приложения
│   └── __init__.py           # Файл инициализации и определения пакета
│   └── caching.py            # Файл с модулем кэширования
│   └── client_ip.py          # Файл с модулем получения ip пользователя
│   └── queryset.py           # Файл с модулем чтения данных из базы данных
│   └── rating.py             # Файл с модулем добавления рейтинга
│   └── search.py             # Файл с модулем поиска
│   └── template_tags.py      # Файл с модулем шаблонных тегов и фильтров
│   └── validator.py          # Файл с модулем валидации формы рейтинга
├── static                    # Папка для хранения статических файлов
├── templates                 # Папка для хранения структуры HTML-шаблонов
├── users                     # Пакет с приложением
│   ├── migrations            # Пакет с миграциями
│   ├── templatetags          # Пакет с шаблонными тегами приложения
│   └── __init__.py           # Файл инициализации и определения пакета
│   └── admin.py              # Файл с зарегистрированными моделями приложения в системе администрирования
│   └── apps.py               # Файл с конфигурацией приложения
│   └── models.py             # Файл с моделями данных приложения
│   └── tests.py              # Файл для создания тестов для приложения
│   └── translation.py        # Файл с обозначением полей моделей для локализации
│   └── urls.py               # Файл с шаблонами адресов приложения 
│   └── views.py              # Файл с логикой приложения
└── .env                      # Файл с переменными окружения (добавляется самостоятельно)
└── .gitattributes            # Файл с атрибутами Git
└── .gitignore                # Файл для списка файлов и папок, которые Git игнорирует и не отслеживает
└── Blog-by-Me.gif            # GIF-изображение с логотипом проекта
└── manage.py                 # Файл-утилита командной строки для управления проектом
└── README.md                 # Файл с руководством описания проекта
└── requirements.txt          # Файл с названиями модулей и пакетов для корректной работы проекта
```

## Установка:
1. Копируем содержмое репозиториия (требуется установленный [Git](https://git-scm.com/downloads))

    ```
    git clone https://github.com/MetaMaxfield/blog_by_me.git
    ```

2. Создаем виртуальное окружение

    - Создаем папку с виртуальным окружением в папке с проектом
        ```
        python -m venv venv
        ```

    - Активируем виртуальное окружение

      * Для Windows
          ```
          venv\Scripts\activate
          ```
      
      * Для macOS и Linux
          ```
          source venv/bin/activate
          ``` 

3. Устанавливаем необходимые пакеты

    ```
    pip install -r requirements.txt
    ```

4. Создаем базу данных в PostgreSQL

5. Добавляем проект в приложения Google аккаунта и сохраняем пароль приложения

6. Регистрируем сайт на Google ReCAPTCHA, сохраняем ключ сайта и секретный ключ

7. Устанавливаем и запускаем Memcached

8. Сгенерируем и сохраним SECRET_KEY для проекта
   
    - Выполним команду в каталоге проекта
        ```
        python manage.py shell
        ```
    - В запустившемся интерпретаторе Python вводим две команды
        ```
        from django.core.management.utils import get_random_secret_key
        print(get_random_secret_key())
        ```
      
9. Создаем файл ``` .env ``` в папке с проектом и добавляем переменные окружения

    Пример: ``` SECRET_KEY=your_secret_key ```

    ```
    # Список переменных окружения, значения которых добавляются самостоятельно:
    CACHE_KEY=                   # Ключ для получения кэшированных данных
    KEY_POSTS_LIST=              # Ключ для получения списка постов из базы данных
    KEY_POST_DETAIL=             # Ключ для получения отдельного поста из базы данных
    KEY_CATEGORIES_LIST=         # Ключ для получения списка категорий из базы данных
    KEY_VIDEOS_LIST=             # Ключ для получения списка видоезаписей из базы данных 
    KEY_CONTACT_FLATPAGE=        # Ключ для получения данных плоской страницы из базы данных
    KEY_AUTHORS_LIST=            # Ключ для получения списка авторов из базы данных
    KEY_AUTHOR_DETAIL=           # Ключ для получения отдельного автора из базы данных
    KEY_TOP_POSTS=               # Ключ для получения трёх самых популярных постов из базы данных
    KEY_LAST_POSTS=              # Ключ для получения трёх последних постов из базы данных
    KEY_ALL_TAGS=                # Ключ для получения тегов постов из базы данных
    KEY_POSTS_CALENDAR=          # Ключ для получения дней публикации постов для календаря из базы данных
    
    # Список переменных окружения, значения которых мы сохраняли ранее:
    EMAIL_HOST_USER_KEY=         # Почта Google аккаунта для отправки e-mail 
    EMAIL_HOST_PASSWORD_KEY=     # Пароль от приложения из Google аккаунта
    ENV_RECAPTCHA_PUBLIC_KEY=    # Ключ сайта из Google ReCAPTCHA
    ENV_RECAPTCHA_PRIVATE_KEY=   # Секретный ключ из Google ReCAPTCHA
    KEY_DATABASES_NAME=          # Название базы данных в PostgreSQL
    KEY_DATABASES_USER=          # Имя пользователя в PostgreSQL
    KEY_DATABASES_PASSWORD=      # Пароль пользователя в PostgreSQL
    DJANGO_SECRET_KEY=           # Сгенерированный нами секретный ключ проекта
    ```

10. Выполняем миграции

    ```
    python manage.py migrate
    ```

11. Создаем суперпользователя

    ```
    python manage.py createsuperuser
    ```

12. Выполняем необходимые пользовательские команды

    - Создаем плоскую страницу "О нас"
        ```
        python manage.py create_flatpage_contact
        ```
    - Создаем группы пользователей
        ```
        python manage.py create_groups
        ```

13. Запускаем проект

    ```
    python manage.py runserver
    ```

## Источники:
1. Книга "Django 2 в примерах" А. Меле
2. [YouTube канал "Django School"](https://www.youtube.com/@DjangoSchool)
3. [Готовый HTML шаблон](http://html-template.ru/blogi/item/289-modnyj-i-sovremennyj-blog)